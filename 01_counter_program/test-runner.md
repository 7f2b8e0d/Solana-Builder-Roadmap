# 🧪 测试运行指南

## 测试套件说明

我们的完善测试程序包含以下测试模块：

### 📋 基础功能测试
- ✅ 计数器初始化
- ❌ 重复初始化防护
- ✅ 计数器增加
- ✅ 计数器减少

### 🔄 批量操作测试
- ✅ 连续增加操作
- ✅ 连续减少操作
- ✅ 负数处理

### 🔐 权限控制测试
- ✅ 权限用户重置
- ❌ 未授权用户重置防护

### 📊 边界条件测试
- ✅ 大数值处理
- ✅ 增减切换

### 🔍 账户状态验证
- ✅ PDA地址验证
- ✅ 数据结构验证

## 运行测试

### 1. 启动本地验证器
```bash
# 终端1：启动Solana测试验证器
solana-test-validator
```

### 2. 运行测试
```bash
# 终端2：构建并运行测试
anchor build
anchor test
```

### 3. 仅运行测试（如果已构建）
```bash
anchor test --skip-build
```

## 测试输出示例

```
🔢 Counter Program 完整测试套件
🔧 测试配置:
📍 程序ID: 5aGBXbYGppiv3F4TTtDn3pokarVUXTv5MoFkNbP4jsSJ
📍 计数器PDA: 7YxKwV...
📍 权限用户: 9WzDXw...

  📋 基础功能测试
    ✅ 应该能成功初始化计数器
    ❌ 不应该能重复初始化计数器
    ✅ 应该能增加计数器
    ✅ 应该能减少计数器

  🔄 批量操作测试
    ✅ 应该能连续增加计数器
    ✅ 应该能连续减少计数器
    ✅ 应该能处理负数

  🔐 权限控制测试
    ✅ 权限用户应该能重置计数器
    ❌ 未授权用户不应该能重置计数器

  📊 边界条件测试
    ✅ 应该能处理大数值
    ✅ 应该能在增加和减少之间切换

  🔍 账户状态验证
    ✅ 应该验证PDA地址计算正确
    ✅ 应该验证账户数据结构

🎉 所有测试完成！
```

## 测试特点

### 🎯 全面覆盖
- 正常流程测试
- 错误情况测试
- 边界条件测试
- 权限控制测试

### 📝 详细日志
- 每个测试步骤都有清晰的日志输出
- 交易签名记录
- 状态变化追踪

### 🔒 安全验证
- 权限控制验证
- 重复操作防护
- 数据完整性检查

### 🚀 性能测试
- 批量操作测试
- 大数值处理
- 连续操作稳定性
